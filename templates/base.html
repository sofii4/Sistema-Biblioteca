<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Municipal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>

    <div id="headerine">
        <div id="headerimg">
            <div id="headerusuario">
                {% if session.get('usuario_logado') %}
                <p style="color: #ffffff;">MODO RECEPÇÃO (<a href="{{ url_for('logout') }}"
                        style="color: rgb(255, 255, 255);">Sair</a>)</p>
                {% else %}
                <p><a href="{{ url_for('login') }}">Acesso Recepção</a></p>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="main-title">
        <h1>Sistema de Consulta de Acervo</h1>
    </div>

    <div id="container">
        <div id="content_box">
            <div class="widget">
                <h2>Menu</h2>
                <ul>
                    <li>
                        <a href="{{ url_for('index') }}">
                            <i class="fa-solid fa-magnifying-glass"></i> Consultar Livros
                        </a>
                    </li>
                    {% if session.get('usuario_logado') %}
                    <li class="menu-admin">
                        <a href="{{ url_for('admin') }}">
                            <i class="fa-solid fa-plus"></i> Cadastrar Novo
                        </a>
                    </li>
                    {% endif %}
                </ul>
            </div>
        </div>

        <div class="right-column">
            {% block content %}{% endblock %}
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Mapeamento de ícones por valor da option
            const iconMap = {
                // Tipos
                'livro': '<i class="fa-solid fa-book" style="margin-right:8px; color: #3A853D;"></i>',
                'revista': '<i class="fa-solid fa-newspaper" style="margin-right:8px; color: #3A853D;"></i>',
                'todos': '<i class="fa-solid fa-layer-group" style="margin-right:8px;"></i>',

                // Idiomas
                'pt': '<i class="fa-solid fa-language" style="margin-right:8px;"></i>',
                'en': '<i class="fa-solid fa-globe" style="margin-right:8px;"></i>',
                'es': '<i class="fa-solid fa-earth-americas" style="margin-right:8px;"></i>',

                // Situação
                'disponivel': '<i class="fa-solid fa-circle-check" style="margin-right:8px; color: green;"></i>',
                'emprestado': '<i class="fa-solid fa-circle-exclamation" style="margin-right:8px; color: red;"></i>',
                'extraviado': '<i class="fa-solid fa-circle-xmark" style="margin-right:8px; color: gray;"></i>'
            };

            const elements = document.querySelectorAll('.js-choice');
            elements.forEach(el => {
                new Choices(el, {
                    searchEnabled: false, // Desativa busca se não for necessário
                    itemSelectText: '',   // Remove o texto "Press to select"
                    shouldSort: false,
                    callbackOnCreateTemplates: function (template) {
                        return {
                            // Como a opção aparece na lista aberta
                            choice: (classNames, data) => {
                                const icon = iconMap[data.value] || '';
                                return template(`
                                <div class="${classNames.item} ${classNames.itemChoice} ${data.disabled ? classNames.itemDisabled : classNames.itemSelectable}" data-select-text="${this.config.itemSelectText}" data-choice ${data.disabled ? 'data-choice-disabled aria-disabled="true"' : 'data-choice-selectable'} data-id="${data.id}" data-value="${data.value}" role="option">
                                    ${icon} ${data.label}
                                </div>
                            `);
                            },
                            // Como a opção selecionada aparece no campo fechado
                            item: (classNames, data) => {
                                const icon = iconMap[data.value] || '';
                                return template(`
                                <div class="${classNames.item} ${data.highlighted ? classNames.highlightedState : classNames.itemSelectable} ${data.placeholder ? classNames.placeholder : ''}" data-item data-id="${data.id}" data-value="${data.value}" ${data.active ? 'aria-selected="true"' : ''} ${data.disabled ? 'aria-disabled="true"' : ''}>
                                    ${icon} ${data.label}
                                </div>
                            `);
                            },
                        };
                    },
                });
            });
        });
    </script>

</body>

</html>