{% extends "base.html" %}

{% block content %}
<div id="content">
    <h2>Editar Obra</h2>

    {% if mensagem %}
        {% if 'Erro' in mensagem %}
            <div class="msgerro"
            style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 4px; border: 1px solid #f5c6cb; margin-bottom: 20px;">
                {{ mensagem }}
            </div>
        {% endif %}
    {% endif %}

    <form method="POST">
        <label>TÃ­tulo:</label><br>
        <input type="text" name="titulo" value="{{ obra['titulo'] }}" required style="width: 100%;"><br>

        <label>Autor:</label><br>
        <input type="text" name="autor" value="{{ obra['autor'] }}" required style="width: 100%;"><br>

        <div style="display: flex; gap: 20px;">
            <div style="flex: 1;">
                <label>Tipo:</label><br>
                <select name="tipo" style="width: 100%;">
                    <!-- verifica qual era o valor antigo para deixar selecionado -->
                    <option value="livro" {% if obra['tipo']=='livro' %}selected{% endif %}>Livro</option>
                    <option value="revista" {% if obra['tipo']=='revista' %}selected{% endif %}>Revista</option>
                </select>
            </div>
            <div style="flex: 1;">
                <label>Idioma:</label><br>
                <select name="idioma" style="width: 100%;">
                    <option value="pt" {% if obra['idioma']=='pt' %}selected{% endif %}>PortuguÃªs</option>
                    <option value="en" {% if obra['idioma']=='en' %}selected{% endif %}>InglÃªs</option>
                    <option value="es" {% if obra['idioma']=='es' %}selected{% endif %}>Espanhol</option>
                </select>
            </div>
        </div>

        <br>
        <label>CÃ³digo Chamada:</label><br>
        <input type="text" name="cod_chamada" value="{{ obra['cod_chamada'] }}" style="width: 100%;">

        <br><br>
        <label><strong>SituaÃ§Ã£o (Status):</strong></label><br>
        <select name="situacao" style="width: 100%; background: #fff3cd;">
            <option value="disponivel" {% if obra['situacao']=='disponivel' %}selected{% endif %}>ðŸŸ¢ DisponÃ­vel</option>
            <option value="emprestado" {% if obra['situacao']=='emprestado' %}selected{% endif %}>ðŸ”´ Emprestado</option>
            <option value="extraviado" {% if obra['situacao']=='extraviado' %}selected{% endif %}>âš« Extraviado</option>
        </select>

        <br><br>
        <button type="submit" style="background: #3A853D; color: white; padding: 10px 20px; border: none;">Salvar
            AlteraÃ§Ãµes</button>
        <a href="{{ url_for('index') }}" style="margin-left: 10px; color: #666;">Cancelar</a>
    </form>
</div>
{% endblock %}