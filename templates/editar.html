{% extends "base.html" %}

{% block content %}
<div id="content">
    <h2>Editar Obra</h2>

    {% if mensagem %}
    <div class="msgerro"
        style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 4px; border: 1px solid #f5c6cb; margin-bottom: 20px;">
        {{ mensagem }}
    </div>
    {% endif %}

    <form method="POST">
        <div style="margin-bottom: 15px;">
            <label><strong>Título:</strong></label>
            <input type="text" name="titulo" value="{{ obra['titulo'] }}" required style="width: 100%;">
        </div>

        <div style="margin-bottom: 15px;">
            <label><strong>Autor:</strong></label>
            <input type="text" name="autor" value="{{ obra['autor'] }}" required style="width: 100%;">
        </div>

        <div class="input-row">
            <div>
                <label><strong>Tipo:</strong></label>
                <select name="tipo" class="js-choice">
                    <option value="livro" {% if obra['tipo']=='livro' %}selected{% endif %}>Livro</option>
                    <option value="revista" {% if obra['tipo']=='revista' %}selected{% endif %}>Revista</option>
                    <option value="enciclopedia" {% if obra['tipo']=='enciclopedia' %}selected{% endif %}>Enciclopédia
                    </option>
                    <option value="dicionario" {% if obra['tipo']=='dicionario' %}selected{% endif %}>Dicionário
                    </option>
                    <option value="jornal" {% if obra['tipo']=='jornal' %}selected{% endif %}>Jornal</option>
                    <option value="gibi" {% if obra['tipo']=='gibi' %}selected{% endif %}>Gibi</option>
                    <option value="livrodidatico" {% if obra['tipo']=='livrodidatico' %}selected{% endif %}>Livro
                        Didático</option>
                </select>
            </div>
            <div>
                <label><strong>Idioma:</strong></label>
                <select name="idioma" class="js-choice">
                    <option value="pt" {% if obra['idioma']=='pt' %}selected{% endif %}>Português</option>
                    <option value="en" {% if obra['idioma']=='en' %}selected{% endif %}>Inglês</option>
                    <option value="es" {% if obra['idioma']=='es' %}selected{% endif %}>Espanhol</option>
                    <option value="it" {% if obra['idioma']=='it' %}selected{% endif %}>Italiano</option>
                    <option value="fr" {% if obra['idioma']=='fr' %}selected{% endif %}>Francês</option>
                    <option value="al" {% if obra['idioma']=='al' %}selected{% endif %}>Alemão</option>
                    <option value="la" {% if obra['idioma']=='la' %}selected{% endif %}>Latim</option>
                    <option value="ou" {% if obra['idioma']=='ou' %}selected{% endif %}>Outros</option>
                </select>
            </div>
        </div>

        <div style="margin-bottom: 15px;">
            <label><strong>Situação (Status):</strong></label>
            <select name="situacao" class="js-choice">
                <option value="disponivel" {% if obra['situacao']=='disponivel' %}selected{% endif %}>Disponível
                </option>
                <option value="emprestado" {% if obra['situacao']=='emprestado' %}selected{% endif %}>Emprestado
                </option>
                <option value="extraviado" {% if obra['situacao']=='extraviado' %}selected{% endif %}>Extraviado
                </option>
                <option value="reserva" {% if obra['situacao']=='reserva' %}selected{% endif %}>Reserva Técnica</option>
            </select>
        </div>

        <div class="input-row">
            <div>
                <label><strong>Estante:</strong></label>
                <input type="text" name="estante" value="{{ obra['estante'] or '' }}" style="width: 100%;">
            </div>
            <div>
                <label><strong>Letra:</strong></label>
                <input type="text" name="letra" value="{{ obra['letra'] or '' }}" maxlength="1" style="width: 100%;">
            </div>
            <div style="flex: 2;"> <label><strong>CDD:</strong></label>
                <input type="text" name="cdd" value="{{ obra['cdd'] or '' }}" style="width: 100%;">
            </div>
        </div>

        <div style="margin-bottom: 20px;">
            <label><strong>Código:</strong></label>
            <input type="text" name="cod_chamada" value="{{ obra['cod_chamada'] }}" style="width: 100%;">
        </div>

        <div style="display: flex; align-items: center; gap: 15px;">
            <button type="submit"
                style="background: #3A853D; color: white; padding: 12px 25px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">
                Salvar Alterações
            </button>
            <a href="{{ url_for('index') }}" style="color: #666; text-decoration: none;">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}